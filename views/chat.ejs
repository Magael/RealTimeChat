
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>socket.io chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
</head>
<body>

    <div class="container p-5">
    <%- include('includes/header'); %>
  <div class="container border border-dark"> 
    <div class="row">
        <div class="col-2 bg-dark">
            <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">
                <a href="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                    <span class="fs-5 d-none d-sm-inline">Users</span>
                </a>
                <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link align-middle px-0">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUWJlxT1pTiuC_x6CWfIok_5rv-AwsLhBAiw&usqp=CAU" class="rounded-circle" alt="" width="60" height="60">
                            <p class="ms-1 text-light h5"><%= username %></p>
                            <p class="text-success">Online</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link align-middle px-0">
                            <img src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img/https://www.daniosorio.com/wp-content/uploads/2018/03/portrait-faces-and-photography-belgian-man-william.jpg" class="rounded-circle" alt="" width="60" height="60">
                            <p class="ms-1 text-light h5">John Martin</p>
                            <p class="text-success">Online</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link align-middle px-0">
                            <img src="https://ruralindiaonline.org/media/images/Vedvati_faces_Shruti_Mahajan_copy.2e16d0ba.fill-512x512.jpg" class="rounded-circle" alt="" width="60" height="60">
                            <p class="ms-1 text-light h5">Asha Parekh</p>
                            <p class="text-danger">Left 3 min ago</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link align-middle px-0">
                            <img src="https://www.byrdie.com/thmb/fNmkGwARqOJC6iWkUu6uzA6jrd0=/1000x800/filters:fill(auto,1)/GettyImages-1138843703-crop-83c877a354e3477692d1d951388903b2.jpg" class="rounded-circle" alt="" width="60" height="60">
                            <p class="ms-1 text-light h5">Blanca Suarez</p>
                            <p class="text-success">Online</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link align-middle px-0">
                            <img src="https://images.unsplash.com/photo-1612896488082-7271dc0ed30c?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8YmVhdXRpZnVsJTIwZmFjZXxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&w=1000&q=80" class="rounded-circle" alt="" width="60" height="60">
                            <p class="ms-1 text-light h5">Pola Raksa</p>
                            <p class="text-success">Online</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link align-middle px-0">
                            <img src="https://i1.sndcdn.com/avatars-hhipSro2hiKYTbfW-r8hL4A-t500x500.jpg" class="rounded-circle" alt="" width="60" height="60">
                            <p class="ms-1 text-light h5">Stephen Smith</p>
                            <p class="text-danger">Left 3 hours ago</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link align-middle px-0">
                            <img src="https://ichef.bbci.co.uk/news/304/mcs/media/images/69247000/jpg/_69247083_einsteingettyafp.jpg" class="rounded-circle" alt="" width="60" height="60">
                            <p class="ms-1 text-light h5">Albert Einstein</p>
                            <p class="text-success">Online</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
       <div class="col-10">
           <div class="row">
                <div class="container" style="background-color: #E5E5E5;">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUWJlxT1pTiuC_x6CWfIok_5rv-AwsLhBAiw&usqp=CAU" class="rounded-circle pt-2" alt="" width="70" height="70">
                    <span class="ms-1 d-none d-sm-inline text-dark"><%= username %></span>
                    <p class="text-success">Online</p>
                    <p class="text-dark text-center">6 messages</p>
                </div>
            </div>
            <div class="row mt-5 mb-5 pb-5">
                <div class="mt-3">
                    <ul id="messages"></ul>
                 </div>
            </div>
            <hr>
            <div class="row mt-5">
                <div class="input-group text-center mt-5">
                    <input type="text" class="form-control ms-5 me-5 p-5 text-dark text-center h4" style="background-color: #F8F4F4;" id="m" placeholder="Type your message"> 
                </div>
            </div>
            <div class="col text-center">
                <button onclick="send()" type="button" class="btn btn-primary px-5 mx-auto mt-5">SEND</button>
            </div>
        </div>
    </div>
</div>
<%- include('includes/footer');%>  
</div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    
    <!--<script src="/socket.io/socket.io.js"></script>--> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.min.js" integrity="sha512-2hIBfT6wur46uR5ayhmyICuA8s15BvJhagB+jZImgktQAy832P7EuY8njl1HGp4YS0Sk8DXRo9dByhvD3jfDxA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!--<script src="chat.js"></script>-->
    
    <script>
        const socket = io();

        const send = function (){
            const text = document.getElementById('m').value;
            socket.emit('chat message',text);
        }

        const receive = function (msg){
            const li = document.createElement('li');
            const currentDate = new Date().toLocaleTimeString();
            let name = "Jane";
            li.style.margin = " 5% 70% 2% 5%";
            li.style.padding ="10px";
            li.style.background = "#1E90FF";
            li.style.color = "white";
            li.style.border = "1px solid blue";
            li.style.borderRadius = "30px";
            li.innerText = msg;
            document.getElementById('messages').appendChild(li);
            li.insertAdjacentText('afterend',name  + '   ' + currentDate );
        }
        socket.on('chat message',receive);  
    </script>
    
</body>
</html>